#separator:tab
#html:true
Difference between an internal an external fault.	Internal: fault of a component<div>External: fault is a propagated failure of another component or from outside the system</div>
Name and explain the three fault categories	<b>Physical</b>:<div>- Malfunctioning of hardware</div><div>- Can be permanent or transient</div><div><b>Design</b>:</div><div>- May originate in hardware or software</div><div>- e.g. illegal condition in a while loop</div><div><b>Interaction</b>:</div><div>- Occur during operation and are caused by the environment</div><div>- e.g. illegal input of system oprator or radiation hitting the system</div>
What is an error?	It is an illegal system state and can be propagated through a system generating other errors.<div>Example: a wrong assignment to a variable</div>
What is failure?	Occurs when an error reaches the service interface of a system, resulting in system behaviour that is inconsistent with its specification.
What does the execution of a system look like in terms of states?	There are two types of states:<div>- Correct</div><div>- Error: Tolerated error states and failure states</div><div><br></div><div>State trasitions are caused by atomic actions:</div><div>- Correct actions</div><div>- Fault actions</div><div>- Recovery actions</div>
Explain the difference between a fault tolerant system and a failed controlled system.	<b>Fault tolerant system</b><div>- Never enters a failure state</div><div>- Errors occur but never reach the service boundary</div><div>- Works according to its specification</div><div>- Implies three steps: error detection, error analysis and recovery</div><div><br></div><div><b>Failed controlled system</b></div><div>- Allow recovery from a failure using special protocols e.g. it goes into a state from which corrective actions can be taken by an external controller.</div>
Explain difference between fault prevention and fault removal.	<b>Fault prevention</b><div>- methods preventing faults being incorporated into a system</div><div><br></div><div><b>Fault removal</b></div><div>- techniques that eliminate faults during the design and development process</div><div>- validation, verification and debugging</div>
Difference between reliability and safety.	<b>Reliability</b><div>- probability that a system is free of failures up to a certain time</div><div><br></div><div><b>Safety</b></div><div>- probability that the system is operating correctly or will fail in a safe manner at a certain time</div>
What is the difference between the three levels of virtualisation?	<b>Bare-metal</b><div>- hypervisor runs on top of hardware</div><div><b>Hosted</b></div><div>- hypervisor runs inside a hosting OS, e.g. virtual box, parallels</div><div><b>OS-level</b></div><div>- containerisation</div><div>- containers share the kernel of the hosting OS</div>
What is hardware-assisted virtualisation?	- it supports an orthogonal mode of CPU operation: VM mode and hypervisor mode<div>- instructions and events can be reserved for hypervisor mode, occurence in VM mode leads to an implicit switch to hypervisor mode</div><div>- applications run in ring 3 in VM mode, guest OS in ring 0 in VM mode, hypervisor in ring 0 in hypervisor mode</div><div>- advantage: VM can run any OS, reduces changes needed in the guest operating system</div><div>- disadvantage: old processors have no support</div>
How are packets processed in network processors?	- checksum verification<div>- field extraction</div><div>- packet classification</div><div>- path selection</div><div>.....</div><div><br></div><div>The processor consists of several packet processing engines which do the above steps.</div>
Name 4 different processor classes.	Signal processors, graphics processors, vector processors and network processors
When does a software interrupt occur?	Examples:<div>- executes a privileged instruction in user mode</div><div>- has an arithemtic error e.g. division by zero</div><div>- accesses a virtual page with wrong permissions</div><div>- executes an emulated instruction</div>
How are I/O signals handled?	same way as exceptions through interrupts
Name 3 features of RISC	- single instruction format<div>- load/store architecture</div><div>- limited addressing mode</div><div>- one cycle machine instructions</div>
Name 3 features of CISC	- instructions may take more than 10 cycles in CISC<div>- variable instruction format</div><div>- memory and register operands</div><div>- many specialised instructions</div>
Disadvantages of the basic pipelined instruction cycle.	- slowest stage defines throughput<div>- all instructions have to go through all stages and all take the same time</div><div>- more complex control logic</div>
What are pipeline hazards?	Situations that inhibit that the next instruction can be processed in the next stage of the pipeline, leading to interrupt of the synchronous execution in the pipeline.
What are the different hazard classes?	<b>Resource or structural hazards</b><div>- two instructions in different stages require the same resource</div><div>- e.g. parallel memory access in IF and MA, subsequent instructions need the FP division hardware that is not implemented as a pipeline</div><div><b>Data hazards</b></div><div>- instruction access the same data as earlier instructions and these are not yet finished</div><div>- result from data dependencies</div><div><b>Control or branch hazards</b></div><div>- jump (loop, if condition etc.) in the controll flow</div>
Why are anti and output dependencies called named dependencies?	Named dependencies would not exist if we have unlimited registers since we can simply store the values elsewhere
When does write after read happen?	when WB is not at the end of the pipeline.
Describe software solutions to data hazards in pipelines	- Implemented by the complier<div>- Insertion of NOPS</div><div>- reorder instructions in the instruction scheduling phase of the compiler, put independent instructions between dependent instructions</div>
What are hardware solutions for data hazards in pipelining	- detect conflicts via hardware logic<div>- handling: interlocking or stalling, forwarding, forwarding with interlocking</div>
What is interlocking or Stalling?	Stops instruction and all subsequent instructions for multiple cycles.
What is forwarding in an instruction pipeline?	- direct forward of ALU results to the ALU input<div>- eliminates stall cycles</div><div>- requires additional hardware (forwarding logic)</div>
"Is it possible to handle this data hazard with only forwarding?&nbsp;<img src=""paste-c2f9ef571cf4fc926278d799c575cac155953fd1.jpg"">"	<div>No, the value loaded from memory is not available until LD's 4th clock cycle.</div>
What is forwarding and interlocking?	Not all hazards can be handled by forwarding alone. Example: true dependence with load operation.
What are control hazards and their consequences?	- computation of the target and condition is done in the EX phase and it replaces PC in the MA phase<div>- condition typically depends on the EXE phase of the previous instruction requiring forwarding</div><div>- only after 3 cycles the correct instruction can be loaded</div>
What does computing the condition and target in ID fix?	- control harzards due to target and condition being computed in the EX phase, reducing stall cycles.
What are the effects of early computation in ID in a basic instruction pipeline?	- additional ALU is required in ID since the original ALU cannot be used.<div>- data dependence with previous arithmetic instruction, RAW hazard</div><div>- critical path in ID phase is prolongated: decoding, computation of branch target, updating PC for critical path</div>
How does a delay slot help with a control hazard?	- the compiler's instruction scheduling part inserts independent instructions to fill up stall cycles<div>- can be used in combination with early computation</div>
In static branch prediction (hardware based), why are backward jumps always predicticed to be taken?	There is a high chance that there is a loop and the chances of staying in a loop is higher than leaving the loop.
Where does the hardware based static branch prediction take place?&nbsp;	processor
How does a compiler based static branch prediction predict branches?	Specification via a bit in the jump opcode, this is detemined by program analysis or profiling.
Why does a dynamic branch prediction lead to more precise predictions?	The history of a jump is taken into account.
One disadvantage of dynamic branch prediction	Expensive interms of hardware.
Why do we not need the last two bits in an address tag from an entry in a branch prediction buffer?	We don't need byte information.
Name an example and explain why: when is a two bit predictor better than a single bit predictor?	A single bit predictor is suboptimal for nested loops due to an extra wrong prediction in every first interation of the inner loop.
TODO: Why is a small prediction buffer sufficient?	
How do (m,n) predictors work?	Use the history of last m jumps to select one of 2^m n-bit predictors.
What is a pattern history table in the context of (m,n) correlation predictors for branch prediction?	The PHT stores a list of 2^m n-bit predictors. The BHR (branch history register) is an m-bit shift register and stores the global history of the last m jumps. the BHR gives the index of the pattern history table.
When is a branch target buffer advantageous?	When the computation of the target address is late in the pipeline.
What is a branch target buffer?	- stores the jump address and the target address<div>- can be used in the IF phase, since we have the address of the jump instruction</div><div>- can be combined with a predictor</div>
What is a superscalar processor?	A superscalar processor can execute more than one instruction at the same time in all pipeline stages. Achieves a throughput of multiple instructions per cycle.
(Extended pipeline) what is instruction fetch?	Includes components such as instruction cache and the branch prediction logic.
Name the 7 stages in the extended pipeline (mordern processors)	Fetch, decode, rename, issue, execution, write-back and commit.
"Is it possible to handle this data hazard with only forwarding?&amp;nbsp;&lt;img src=""paste-c2f9ef571cf4fc926278d799c575cac155953fd1.jpg""&gt;"	&lt;div&gt;No, the value loaded from memory is not available until LD's 4th clock cycle.&lt;/div&gt;
Where does the hardware based static branch prediction take place?&amp;nbsp;	processor
(Extended Pipeline) What are the components in IF?	<div>- Multiple branch predictors in the first cycle<br></div><div>- fetch address calculation</div>-instruction cache access: instruction cache data array, instruction cache tag array, instruction cache TLB aray<div>-instructions drive to decode storage</div>
(Extended pipeline) Why are hybrid branch predictors needed in IF?	The effectiveness of predictors depends on the code and other circumstances. Different predictors are suited for different applications/contexts. The selector is updated according to the correctness of the predictors.
(Extended pipeline) What is a return address stack in IF?	- Special hardware predicting function returns<div>- Hardware LIFO structure</div><div>- if unlimited all return addresses would be correctly predicted</div>
What are the input and outputs of&nbsp;instruction decoding?	Input: raw stream of bytes<div>Output: series of control signals</div>
Differences between RISC and CISC decoding	- RISC has fixed instruction length, easier to identify instructions<div>- RISC has fewer encoding formats</div><div>- RISC has simple instructions, so only a few control signals are generated for the next stage</div><div>- RISC enables single cycle decoding using simple Programmable Logic Array and smaller look up tables doe to its simplicity</div>
List some prefixes opcodes can have in x86	- prefixes for string instruction, e.g. repeat string instruction<div>- atomic operation i.e.&nbsp;<em>executed without any other process being able to</em> read or change state during it</div><div>- operand type override</div>
(Extended Pipeline) What is the purpose of an instruction queue?	It hides bubbles in the ILD and allows the ILD to proceed when complex translations ar required in the subsequent decoder.
(Extended pipeline) What does instruction length decode in ID do?	- identifies instructions<div>- decodes all prefixes</div><div>- marks various properties that simplify dynamic translation</div><div>- most instructions are handled in a single cycle</div><div>- length changing prefixes require six cycles</div>
What is the purpose of the loop stream detector?	- the need for branch prediction and fetching is eliminated, since the same instruction is provided by the loop stream detector over and over again<div>- saves power</div>
formula for performance	[latex]performance = $\frac{1}{\text{execution time}}$[/latex]
Give three formulae for execution time	"[latex]\begin{itemize}<br>\item exec time = \#cycles $\times$ clock period = $\frac{\# \text{cycles}}{\text{clock rate}}$<br>&nbsp;&nbsp;&nbsp; \item exec time = $\frac{\# \text{instructions} \times \text{CPI}}{\text{clock rate}}$\\<br>where CPI $ = $ avg \#cycles per instr.<br> \end{itemize}<br>[/latex]"
Give the formulae for&nbsp;<b>energy&nbsp;</b>and&nbsp;<b>power</b>	[latex]\begin{itemize}<br>&nbsp; \item energy $\propto$ capacitive load $\times$ voltage$^2$<br>&nbsp; \item power $\propto$ capacitive load $\times$ voltage$^2 \times$ frequency switched<br> \end{itemize}[/latex]
Formulae for seedup in terms of <b>performance</b>,&nbsp;<b>time&nbsp;</b>and&nbsp;<b>tpm (transactions/min)</b>	[latex]speedup(p processors) = $\frac{\text{perf}(p \text{ proc.})}{\text{perf}(1 \text{ proc.})} = \frac{\text{time}(1 \text{ proc.})}{\text{time}(p \text{ proc.})} = \frac{\text{tpm}(p \text{ proc.})}{\text{tpm}(1 \text{ proc.})}$[/latex]
Give the formula for efficiency for&nbsp;<i>p&nbsp;</i>processors	[latex]efficiency(p proc.)$ = \frac{\text{speedup}(p \text{ proc.})}{p}$[/latex]
What is wall clock time / response time	Total time elapsed from start to finish of a task
What is system (cpu) time	Time CPU is executing OS services during execution of a task
What is user time	Time CPU spends executing the program
What are counter measures to leakage currents	<ul><li>Lower clock rates: Dynamic Voltage and Frequency Scaling</li><li>Clock gating: Switch the clock off for certain components</li><li>Power gating: Switch power off</li><li>Undervolting</li></ul>
What are concurrent tasks	Two tasks are called concurrent, if they are not dependent on each other
Definition of parallel tasks	Two task are executed in parallel if at some point in time both tasks have been<br>started and not terminated.
Different levels of parallelism in hardware	<ul><li>Bit-level arithmetic</li><li>Instruction pipelining</li><li>Multiple memory banks</li><li>RAID systems</li><li>Multicore processors</li><li>Multicomputers</li><li>Computers on a network</li></ul>
Name and define locality properties of programs	<ul><li>Temporal: Addresses recently accessed will be accessed again in the<br>near future with high probability.</li><li>Spatial: Addresses near to recently accessed addresses will be accessed<br>in near future with high probability.</li></ul>
Define fault and give an example	Defect of a system that may cause an error<br>e.g. bug in code
Define Availability	Percentage of the planned operation time, in which the system is available.
3 levels of Virtualization	<ul><li>Bare-metal: Hypervisor runs on hardware</li><li>OS-level / Containerization: Container shares kernel of hosting OS</li><li>Hosted: Hypervisor runs inside a hosting OS</li></ul>
Full virtualization vs Paravirtualization	<ul><li>Full virtualization: OS is unchanged, binary rewriting of instructions</li><li>Paravirtualization: OS needs to be changed.<br></li></ul>
What is Hardware-assisted virtualization	Hardware supports orthogonal modes of CPU operation: VM mode and hypervisor mode.<br>Instructions can be reserved for Hypervisor
What is a specialization of Network Processors and name an example	They contain multiple Package Processing Engines for parallel computation of operations such as Checksum verification.<br>Example: Intel Tofino 2
Name and explain 3 subtypes of Distributed Memory	<ul><li>MPP (Massively parallel processing): Multiple processors with own OS and Memory work on one task</li><li>NOW (Network of Stations): Independent computers connected by some network e.g. internet</li><li>Cluster: Multiple CPUs with own memory and shared OS work together</li></ul>
Name and explain 2 subclasses of Shared Memory	<ul><li>UMA : (symmetric multiprocessors - SMP): centralized shared memory, accesses to global memory from all processors have same latency.<br></li><li>NUMA (Distributed Shared Memory Systems - DSM): memory is distributed among the nodes, local accesses much faster than remote accesses.<br></li></ul>
Name and explain different addressing modes an ISA can support	<ul><li>Immediate: Operand is part of the instruction</li><li>Register: Operand is in a register. Register address is given.</li><li>Direct: memory address is part of the instruction</li><li>Register indirect: memory address is in a register</li><li>Indexed, Displacement: register indirect plus fixed offset<br></li></ul>
Steps of exception handling by OS	<ul><li>Interrupt of the currently executed instruction</li><li>Save the processor state</li><li>Jump to prede ned address for handler</li><li>switch to supervisor mode</li><li>Handle the exception</li><li>Return to original instruction in user mode<br></li></ul>
Name the 5 pipeline stages and their purpose	<ul><li><b>IF - Instruction Fetch</b><br>Fetch instruction from memory into instruction register<br> Increment PC</li><li><b>ID - Instruction Decode</b><br>Decode instruction<br>Fetch register operands from register file</li><li><b>EX - Execute<br></b>Perform ALU operation<br>For load or store operations compute the address</li><li><b>MA - Memory Access<br></b>Read or write from/to memory in case of load or store.</li><li><b>WB - Write Back<br></b>Write result back to register file</li></ul>
Name and explain the 3 classes of Pipeline Hazards	<ul><li>Resource Hazard: Result from two instructions that are processed in di erent stages which require the same resource.</li><li>Data Hazard: Instruction access the same data as earlier instructions and these are not yet finished</li><li>Control Hazard:&nbsp;The next instruction cannot be fetched due to a jump in the control flow.</li></ul>
Give the three classes of data dependences	<ul><li>True: write...read</li><li>Anti: read...write</li><li>Output: write...write</li></ul>
2 Hardware mechanisms for handling data hazards	<ul><li>Interlocking / Stalling</li><li>Forwarding of results from the ALU</li></ul>
What is a superscalar processor	A superscalar processor can execute more than one instruction at the same time in all pipeline stages. It can achieve a throughput of multiple instructions per cycle.
